{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nimport SimpleLightBox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nexport function createGallery(arr) {\n        const galleryMarcup =  arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => { return `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n    <ul class=\"description\">\n    <li class=\"descr-item\"><p class=\"descr-item-title\">Likes</p><p class=\"descr-item-value\">${likes}</p></li>\n    <li class=\"descr-item\"><p class=\"descr-item-title\">Views</p><p class=\"descr-item-value\">${views}</p></li>\n    <li class=\"descr-item\"><p class=\"descr-item-title\">Comments</p><p class=\"descr-item-value\">${comments}</p></li>\n    <li class=\"descr-item\"><p class=\"descr-item-title\">Downloads</p><p class=\"descr-item-value\">${downloads}</p></li>\n    </ul></a>\n    </li>\n    `}).join(\"\");\n    clearGallery(galleryMarcup)\n};\n\n\nexport function clearGallery(clearString = \"\") {\n    const gallery = document.querySelector(\".gallery\");\ngallery.insertAdjacentHTML(\"beforeend\", clearString);\nif (clearString) {\n    \n    runLightbox();\n}\n};\n\nfunction runLightbox() {\n    const newGallery = new SimpleLightBox('.gallery a', {\n        captionData: 'alt',\n        captionDelay: 250,\n        overlayOpacity: 0.8,\n    });\n    newGallery.refresh();\n};\n\n  export function newLoader(style) {\n    const loader = document.querySelector(\".loader\");\n    loader.style.display = style; \n  }","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\nimport { clearGallery, createGallery, newLoader } from \"./render-functions\";\nconst API_KEY = \"49624425-89d18311d8423019c2709bd63\";\n\nconst nameInput = document.querySelector(\".js-name-input\");\nconst nextPageBtn = document.querySelector(\".next-page-btn\");\nconst countDisplay = document.getElementById('imageCount');\nconst formInput = document.querySelector(\".js-form\");\nlet pageNumber = 1;\nlet picQuantity = 0;\nconst perPage = 15;\n\nexport async function getImagesByQuery(images) {\n    try {const response = await axios(`https://pixabay.com/api/?key=${API_KEY}&q=${nameInput.value}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${pageNumber}`)\n    picQuantity = response.data.totalHits;\n    countDisplay.textContent = picQuantity;\n    console.log(picQuantity);\n    // console.log(response.data.hits);\n        if (!response.data.hits.length) {\n            showMessage(\"Sorry, there are no images matching your search query. Please try again!\", \"#ef4040\");\n            formInput.reset();\n            nextPageBtn.style.display = \"none\";\n            return response.data.hits;\n        }\n        createGallery(response.data.hits);\n        pageNumber += 1;\n        if (pageNumber > 1 ) {\n            nextPageBtn.style.display = \"block\";\n        } \n        if (pageNumber > 2) {\n            const elem = document.querySelector(\".gallery-item\");\n            const rect = elem.getBoundingClientRect();\n            window.scrollBy({\n                top: rect.height * 3,\n                left: 0,\n                behavior:\"smooth\",\n        });\n            // console.log(rect);\n        }\n        if (pageNumber > Math.ceil(picQuantity / perPage)){\n            nextPageBtn.style.display = \"none\";\n            showMessage(\"That's all images.\", \"#e76f6f\");\n            pageNumber = 1;\n        }\n        const images = response.data.hits;\n    }\n    catch (error) {\n        showMessage(error.message, \"#ef4040\")\n    }\n    finally {\n        newLoader(\"none\");\n    };\n\n };\nexport function newSubmit() {\n    pageNumber = 1;\n    const newSubmitVer = document.querySelector(\".gallery\");\n    newSubmitVer.innerHTML = \"\";\n};\n\n\n\nexport function showMessage(textMessage, backColor) {\n    iziToast.show({\n        title: `${textMessage}`,\n        backgroundColor: `${backColor}`,\n        titleColor: \"#fff\",\n        titleSize: \"16px\",\n        position: \"topRight\",\n        iconURL: './Group (1).svg',\n        // width: '300px',\n    })\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery, showMessage, newSubmit } from \"./js/pixabay-api\";\nimport { newLoader, clearGallery } from \"./js/render-functions\";\n\nconst formInput = document.querySelector(\".js-form\");\nformInput.addEventListener(\"submit\", submitHandler);\nconst galleryListing = document.querySelector(\".next-page-btn\");\n\nlet images = \"\";\n\nfunction submitHandler(event) {\n    event.preventDefault();\n    newSubmit();\n    images = this.elements[\"search-text\"].value.trim();\n    if (!images) {\n        formInput.reset();\n        showMessage(\"Enter correct data, please\", \"#ef4040\");\n        return;\n    }\ngetImagesByQuery(images);\nclearGallery();\nnewLoader('block');\n};\n\ngalleryListing.addEventListener(\"click\", getImagesByQuery);"],"names":["createGallery","arr","galleryMarcup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","clearString","runLightbox","SimpleLightBox","newLoader","style","loader","API_KEY","nameInput","nextPageBtn","countDisplay","formInput","pageNumber","picQuantity","perPage","getImagesByQuery","images","response","axios","showMessage","rect","error","newSubmit","newSubmitVer","textMessage","backColor","iziToast","submitHandler","galleryListing","event"],"mappings":"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"}